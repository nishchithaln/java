//@nishchithaln
package bank;
import login.login;
import java.text.DecimalFormat;
import java.util.*;
// using interface
interface CreateAcc
{
	void accNoGenerator();
	void input();
	void display();
}

class SavingsAccount implements CreateAcc
{
		Scanner sc = new Scanner(System.in);
		String name;
		int mobile;
		String mail;
		long adhar;
		String pan;
		int accno;
		String address;
		String cname;
		double csal;
		String cadd;
		String ifsc="MYBANK1920";
		StringBuilder sb=new StringBuilder(ifsc);
		String sifsc=ifsc.substring(6,10);
		public String getName() {
			return name;
		}
		public void setName(String name) {
			this.name = name;
		}
	public void accNoGenerator()
	{
		long min=1000000001;
		long max=2000000001;
        accno = (int)(Math.random() * (max - min + 1) + min);
	}
    public void input()
    {
    	try
    	{
    	System.out.println("Enter Your full Name:");
    	name=sc.next();
    	this.setName(name);
    	System.out.println("Enter MobileNo:");
    	mobile=sc.nextInt();
    	System.out.println("Enter Your MailID:");
    	mail=sc.next();
    	System.out.println("Enter Adhar Number:");
    	adhar=sc.nextLong();
    	System.out.println("Enter PAN Number:");
    	pan=sc.next();	
    	System.out.println("Enter Current Address:");
    	address=sc.next();
    	}
    	catch(Exception e)
    	{
    		System.out.println("please input correct format");
    	}
    }
	public void display()
	{
		System.out.println("Account Type: SAVINGS");
		System.out.println("Account NUmber:"+sifsc+accno);
		System.out.println("Account Name:"+getName());
		System.out.println("Mobile:"+mobile);
		System.out.println("Mail ID:"+mail);
		System.out.println("Adhar Number:"+adhar);
		System.out.println("PAN Number:"+pan);
		System.out.println("Address:"+address);
	}
		
}
class SalaryAccount extends SavingsAccount implements CreateAcc
{
	public void accNoGenerator()
	{
		long min=1000000001;
		long max=2000000001;
        accno = (int)(Math.random() * (max - min + 1) + min);
	}
	public void input()
    {
		try {
		System.out.println("ENTER PERSONAL DETAILS:");
    	System.out.println("Enter Your full Name:");
    	name=sc.next();
    	this.setName(name);
    	System.out.println("Enter MobileNo:");
    	mobile=sc.nextInt();
    	System.out.println("Enter Your MailID:");
    	mail=sc.next();
    	System.out.println("Enter Adhar Number:");
    	adhar=sc.nextLong();
    	System.out.println("Enter PAN Number:");
    	pan=sc.next();	
    	System.out.println("Enter Current Address:");
    	address=sc.next();
    	System.out.println("ENTER COMPANY DETAILS:");
    	System.out.println("Enter Company Name:");
    	cname=sc.next();
    	System.out.println("Enter Monthly Salary:");
    	csal=sc.nextDouble();
    	System.out.println("Enter Company Address");
    	cadd=sc.next();
		}
    	catch(InputMismatchException ime)
    	{
    		System.out.println("please input correct format");
    	}
    }
	public void display()
	{
		System.out.println("Account Type: SALARY ACCOUNT");
		System.out.println("Account NUmber:"+sifsc+accno);
		System.out.println("Account holder Name:"+getName());
		System.out.println("Mobile:"+mobile);
		System.out.println("Mail ID:"+mail);
		System.out.println("Adhar Number:"+adhar);
		System.out.println("PAN Number:"+pan);
		System.out.println("Address:"+address);
		System.out.println("Company Details:");
		System.out.println("Company Name:"+cname+"\nCompany address:"+cadd);
	}
	
}
//using abstraction
abstract class Account 
{
   	double balance;
	double interest;
	public double getInterest() {
		return interest;
	}
	public void setInterest(double interest) {
		this.interest = interest;
	}
	public double getBalance() {
		return balance;
	}
	public void setBalance(double balance) {
		this.balance = balance;
	}
	final public void deposit(double amount)
	 {
		 balance = balance + amount;
	 }
	 abstract public void withdraw(double amount);
	 abstract public void display();
}

class Savings extends Account
{
	Savings()//Default Constructor
	{
		super();
		balance = 0;
		interest = 0;
	}

	Savings(double initialBalance, double initialInterest)//parameterized constructor
	{
		super();
		balance = initialBalance;
		interest = initialInterest;
	}

	public synchronized void withdraw(double amount)
	{
		if(amount<=balance)
			balance = balance - amount;
		else
			System.out.println("Insufficient funds");
	}
	
	public synchronized void display()//function or method overloading
	{
		System.out.println("Current Balance: "+this.getBalance());
		
	}
	public void display(String date)////method overloading
	{
		System.out.println(date+"\nyour balance is:"+this.getBalance());
	
	}

}

class Transaction implements Runnable
{	
	ArrayList<String> al=new ArrayList<String>();
    String strDate;
    String dep;
	
	public void dipTrans(double damount)
	{
		Date d1=new Date();
		strDate = String.format("%tY-%<tm-%<td %<tH:%<tM:%<tS", d1);
		dep="deposited:"+damount+" date: "+strDate;
		al.add(dep);
	}
	
	public void withTrans(double wamount)
	{
		Date d2=new Date();
		strDate = String.format("%tY-%<tm-%<td %<tH:%<tM:%<tS", d2);
		String wit="withdraw:"+wamount+" date: "+strDate;
		al.add(wit);
	}
	
	public void run()
	{
		try
		{
		for(Object p:al)
			{
			System.out.println(p);
			}
		}
		catch(IndexOutOfBoundsException ioe)
		{
			System.out.println("Index out of bounds exception occur");
		}
	}
	
	
}

class Loan extends Thread
{
	
	float pamount;//principle amount
	float tperiod;//tenure
	static float roi;//static variable
	float mi;//monthly interest
	float ta;//total amount you paid444
	DecimalFormat dc=new DecimalFormat("#");
	float ti;//total interest
	static //static block
	{
		roi=10.0f;
	}
	
	void input()
	{
		Scanner sc=new Scanner(System.in);
		System.out.println("Enter the principle amount");
		pamount=sc.nextFloat();
		System.out.println("Enter the time period");
		tperiod=sc.nextFloat();
	}
	static void disp()
	{
		System.out.println("the rate of interst is:"+roi);
	}

	public void run()
	{
		
		roi=roi/(12*100);
		tperiod=tperiod*12;
		mi=(pamount*roi*(float)Math.pow(1+roi,tperiod))/((float)Math.pow(1+roi,tperiod)-1);
		ta=mi*tperiod;
		ti=ta-pamount;
		
	}
	void display()
	{
		System.out.println("");
		//System.out.println("The monthly EMI is:"+dc.format(mi));	
		System.out.println("the total interest is:"+dc.format(ti));
		System.out.println("the total amount is:"+dc.format(ta));
	}
	static class display
	{
		void printMessage()
		{
			System.out.println("excutive manager will contact you shortly");
		}
	}
}


public class BankApp
{
	public static void main(String[] args)
	{
		try
		{
		login l=new login();
		l.login();	
		String type = null;
		ArrayList<String> al=new ArrayList<String>();
		SavingsAccount sav=new SavingsAccount();
		SalaryAccount sal=new SalaryAccount();
		Savings s=new Savings(0,0.10);
		Transaction t=new Transaction();
		Thread t1=new Thread(t);//runnable interface
		
		Loan l1=new Loan();
		Loan.display ld=new Loan.display();
		Date date = new Date();
		String strDate = String.format("%tY-%<tm-%<td %<tH:%<tM:%<tS", date);
		Scanner sc=new Scanner(System.in);
		boolean repeat=true;
		do {
		System.out.print("---------------------------------------------\n               MENU           \n---------------------------------------------\n");
		System.out.println("1.Create Account\n2.Account Information\n3.Cash Deposit\n4.Cash withdrawl\n5.last transactions:\n6.check balance\n7.loan \n8.logout\n---------------------------------------------");
		int choice=sc.nextInt();
		
		switch(choice)
		{
		case 1:
			System.out.println("Create a new account");
			System.out.println("enter choice:\na.savings account\nb.salary account");
			char choice1=sc.next().charAt(0);
			switch(choice1)
			{
			case 'a':
				System.out.println("Create a new savings account");
				type="savings";
				sav.accNoGenerator();
				sav.input();
		        break;
			case 'b':
				System.out.println("Create a new salary account");
				type="salary";
				sal.accNoGenerator();
				sal.input();
		        break;
			}
			break;
		case 2:
			System.out.println("Account Informtion:");
			if(type.equalsIgnoreCase("savings"))
			{
				sav.display();
			}
			else
			{
				sal.display();
			}
			break;
			
		case 3:	
			System.out.println("Enter deposit amount");
			double damount=sc.nextDouble();
			System.out.println("hello "+sav.getName()+",\nAccoont Number:"+sav.sifsc+sav.accno);
			s.deposit(damount);
			t.dipTrans(damount);
			
			s.display();
			break;
		case 4:
			System.out.println("Cash Withdrawl");
			double wamount=sc.nextDouble();
			System.out.println("hello, "+sav.name);
			s.withdraw(wamount);
			t.withTrans(wamount);
			s.display();
			break;
		case 5:
			t1.start();
			break;
		case 6:
			System.out.println("hello "+sav.getName()+",\nAccoont Number:"+sav.sifsc+sav.accno);
			s.display(strDate);
			break;
		case 7:
			System.out.println("Loan Application");
			l1.input();
			if(15000<=s.balance)
			{
				System.out.println("You Eligible To Take A Loan");
				l1.start();
				l1.display();
				ld.printMessage();
				
			}
			else
			{
				System.out.println("You Are Not Eligible To Take A Loan");
			}
			
			break;
		case 8:
			System.out.println("Thank You "+sav.name);
			repeat=false;
			break;
		default:
				System.out.println("Invalid input");
				break;
				
		}
		}while(repeat);
		}
		catch(Exception e)//generic exeption
		{
			
		}
	
	}
		

}

//implementation of package login
package login;

import java.util.Scanner;


public class login
{
	String uname;
	String pass;
	public void login() 
	{
		Scanner sc=new Scanner(System.in);
		System.out.println("                 Welcome To MYBANK               ");
		System.out.println("Enter Username:");
		uname=sc.nextLine();
		System.out.println("Enter Password");
		pass=sc.next();
		
		if(uname.equals("admin"))
		{
			if(pass.contentEquals("admin"))
			{
		        System.out.println("Login Successfull");
			}
			else
			{
				System.out.println("please enter valid username and password");
				System.exit(0);
			}
		}
		else
		{ 
			System.out.println("please enter valid username and password");
			System.exit(0);
		}	
		
	}
	
}
